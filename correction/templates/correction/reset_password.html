{% block content %}
<style>
body { background:#f9fcf7;}
.form-section { background: #fff; border-radius: 8px; box-shadow: 0 2px 10px #00806022; padding: 2rem 1.5rem; max-width: 410px; margin: 2.7rem auto;}
.form-header { color: #008060; font-weight: 700; font-size: 1.4em; margin-bottom:1.1rem; text-align:center;}
label { color:#008060; font-weight:500; margin-top:1rem; display:block; margin-bottom:0.5rem;}
input[type="text"], input[type="password"] { width:100%; border:1.5px solid #008060; border-radius:5px; padding:0.6em; background:#f6fefb; font-size:1em; margin-bottom:1.2em;}
button.submit-btn { width:100%; background:#008060; color:#fff; font-weight:600; font-size:1.1em; border:none; border-radius:5px; padding:0.8em 0.5em; margin-top:1em; cursor:pointer; transition:background 0.3s;}
button.submit-btn:hover { background:#00a484; }
@media (max-width: 700px){ .form-section { max-width:98vw; padding: 1.2rem 0.7rem;} .form-header {font-size:1.09em;} }
.msg-bloc { margin-bottom: 1.07em;}
</style>

<div class="form-section">
    <div class="form-header">üîê R√©initialisation du mot de passe</div>
    {% if messages %}
      <div class="msg-bloc">
        {% for m in messages %}
          <div style="
            background: {% if m.tags == 'success' %}#d2ffe2{% else %}#ffe1e1{% endif %};
            color: {% if m.tags == 'success' %}#007931{% else %}#d10c20{% endif %};
            border-radius:8px; padding:0.72em 1.12em; font-weight:600; text-align:center;">
            {{ m }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
    {% if message %}
      <div class="msg-bloc">
        <div style="background:#ffe1e1; color:#d10c20; border-radius:8px; padding:0.72em 1.12em; font-weight:600; text-align:center;">
            {{ message }}
        </div>
      </div>
    {% endif %}
    <form method="post" autocomplete="off">
        {% csrf_token %}
        <input type="hidden" name="whatsapp" value="{{ whatsapp }}">
        <label for="id_question">Question secr√®te :</label>
        <div style="margin-bottom:1.11em; color:#134c33; font-weight:500; background:#effcf8; border-radius:6px; padding:0.7em 1.1em;">
            {{ question }}
        </div>
        <label for="id_secret_answer">Votre r√©ponse √† la question</label>
        <input id="id_secret_answer" name="secret_answer" type="text" required>

        <label for="id_new_password">Nouveau mot de passe</label>
        <input id="id_new_password" name="new_password" type="password" required>

        <button type="submit" class="submit-btn">R√©initialiser</button>
    </form>
    <div style="margin-top:1em; text-align:center;">
        <a href="{% url 'correction:login' %}" style="color:#00a484;text-decoration:underline;">Retour √† la connexion</a>
    </div>
</div>
{% endblock %}