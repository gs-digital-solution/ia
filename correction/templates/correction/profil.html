{% block content %}
<style>
.form-section { background: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.06); padding: 2rem 1.5rem; max-width: 510px; margin: 3rem auto;}
.form-header { color: #008060; font-weight: 700; font-size: 2em; margin-bottom:1.2rem; text-align:center;}
label { color:#008060; font-weight:500; margin-top:1rem; display:block; margin-bottom:0.5rem;}
input[type="text"], input[type="password"], input[type="tel"], select { width: 100%; border: 1.5px solid #008060; border-radius: 5px; padding: 0.6em; margin-bottom: 1.2em; background: #f6fefb; font-size: 1em;}
input:focus, select:focus { border-color: #00a484; outline: none;}
input[readonly] { background: #e3f2ed; color: #777;}
button.submit-btn { width: 100%; background: #008060; color: #fff; font-weight: 600; font-size: 1.15em; border: none; border-radius: 5px; padding: 0.8em 0.5em; margin-top: 1em; cursor: pointer; transition: background 0.3s;}
button.submit-btn:hover { background: #00a484; }
@media (max-width: 700px) { .form-section { max-width: 99vw; padding: 1.1rem 0.47rem; } .form-header {font-size: 1.33em;} }
.msg-bloc { margin-bottom: 1.07em;}
.read-bloc {background: #f3fffa; border-radius: 7px; padding: 0.62em 1em; margin-bottom:0.6em; border:1.5px solid #d3f5ea;}

/* --- NavBar --- */
.quick-nav {
    width: 100%;
    max-width: 540px;
    margin: 0 auto 1.1em auto;
    display: flex;
    justify-content: center;
    gap: 1em;
    flex-wrap: wrap;
}
.quick-btn {
    background: #00a484;
    color: #fff;
    font-size: 1.08em;
    font-weight: 600;
    border: none;
    border-radius: 25px;
    padding: 0.44em 1.2em 0.46em 1.2em;
    margin:0;
    box-shadow: 0 1px 6px #00806044;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
    transition: background .18s, color .18s, box-shadow .2s;
}
.quick-btn:hover, .quick-btn:focus { background: #008060; color: #efefef;}
@media (max-width: 700px) { .quick-nav { max-width:98vw; gap:0.32em;} .quick-btn { width: 95vw; max-width:99vw; text-align:center; margin: 0.09em auto;} }
</style>

<!-- NAVBAR -->
<div class="quick-nav">
    <a href="{% url 'correction:profil' %}" class="quick-btn">Profil</a>
    <a href="{% url 'correction:soumettre' %}" class="quick-btn">Soumettre un exercice</a>
    <a href="{% url 'correction:historique' %}" class="quick-btn">Historique</a>
    <a href="{% url 'correction:login' %}" class="quick-btn">D√©connexion</a>
        {% if user.is_authenticated and user.role == 'admin' %}
    <a href="{% url 'correction:admin_dashboard' %}" class="quick-btn">Dashboard admin</a>
{% endif %}
</div>

<div class="form-section">
    <div class="form-header">üë§ Mon profil utilisateur</div>
    {% if messages %}
      <div class="msg-bloc">
        {% for m in messages %}
          <div style="
            background: {% if m.tags == 'success' %}#d2ffe2{% else %}#ffe1e1{% endif %};
            color: {% if m.tags == 'success' %}#007931{% else %}#d10c20{% endif %};
            border-radius:8px; padding:0.72em 1.12em; font-weight:600; text-align:center;">
            {{ m }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
    <div class="read-bloc">
        <b>Adresse Gmail :</b> <span>{{ gmail }}</span><br>
        <b>Code promo :</b> <span>{{ code_promo }}</span>
    </div>
    <form method="post" autocomplete="off">
        {% csrf_token %}
        {% if form.non_field_errors %}
            <div style="background:#ffe1e1; color:#d10c20; border-radius:8px; padding:0.7em 1.1em; font-weight: 600; margin-bottom:0.9em;">
                {{ form.non_field_errors }}
            </div>
        {% endif %}
        <label for="id_first_name">Pr√©nom</label>
        {{ form.first_name }}

        <label for="id_whatsapp_number">Num√©ro WhatsApp</label>
        {{ form.whatsapp_number }}

        <label for="id_pays">Pays</label>
        {{ form.pays }}

        <label for="id_sous_systeme">Sous-syst√®me</label>
        {{ form.sous_systeme }}

        <label for="id_secret_question">Question secr√®te</label>
        {{ form.secret_question }}
       <label for="id_secret_answer">R√©ponse secr√®te</label>
        {{ form.secret_answer }}

        <button type="submit" class="submit-btn">Mettre √† jour</button>
    </form>
    <div style="margin-top:1.2em; text-align:center;">
        <a href="{% url 'correction:password_change' %}"
           class="quick-btn"
           style="font-size: 0.97em; padding:0.6em 2.1em; background: rgb(0,128,96);">
            Modifier mon mot de passe
        </a>
    </div>
</div>
{% endblock %}
